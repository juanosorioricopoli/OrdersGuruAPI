{
    "info":  {
                 "name":  "Orders API (Serverless + Cognito) — FULL",
                 "_postman_id":  "01b6fa30-17fa-49b5-83b0-1a3bf232a98b",
                 "description":  "Colección de Postman para Orders API, endpoints de Orders, Products y Customers.\n• Obten el idToken al iniciar el despliegue.\n• Las requests CRUD usan Authorization: Bearer {{idToken}}.\n",
                 "schema":  "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
             },
    "variable":  [
                     {
                         "key":  "region",
                         "value":  "us-east-1"
                     },
                     {
                         "key":  "baseUrl",
                         "value":  "https://\u003crestid\u003e.execute-api.us-east-1.amazonaws.com/dev"
                     },
                     {
                         "key":  "userPoolClientId",
                         "value":  "\u003cUserPoolClientId\u003e"
                     },
                     {
                         "key":  "username",
                         "value":  "juan@example.com"
                     },
                     {
                         "key":  "password",
                         "value":  "P@ssw0rd!"
                     },
                     {
                         "key":  "idToken",
                         "value":  ""
                     },
                     {
                         "key":  "accessToken",
                         "value":  ""
                     },
                     {
                         "key":  "refreshToken",
                         "value":  ""
                     },
                     {
                         "key":  "orderId",
                         "value":  ""
                     },
                     {
                         "key":  "productId",
                         "value":  ""
                     },
                     {
                         "key":  "customerId",
                         "value":  ""
                     },
                     {
                         "key":  "primaryKey",
                         "value":  "id"
                     },
                     {
                         "key":  "awsAccessKeyId",
                         "value":  "\u003cYOUR_AWS_ACCESS_KEY_ID\u003e"
                     },
                     {
                         "key":  "awsSecretAccessKey",
                         "value":  "\u003cYOUR_AWS_SECRET_ACCESS_KEY\u003e"
                     },
                     {
                         "key":  "awsSessionToken",
                         "value":  ""
                     }
                 ],
    "item":  [
                 {
                     "name":  "Orders",
                     "item":  [
                                  {
                                      "name":  "Orders - Create",
                                      "request":  {
                                                      "method":  "POST",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     },
                                                                     {
                                                                         "key":  "Content-Type",
                                                                         "value":  "application/json"
                                                                     }
                                                                 ],
                                                      "body":  {
                                                                   "mode":  "raw",
                                                                   "raw":  "{\n  \"customer\": {\n    \"id\": \"{{customerId}}\"\n  },\n  \"products\": [\n    {\n      \"sku\": \"LATTE\",\n      \"qty\": 2\n    },\n    {\n      \"sku\": \"ESPRESSO\",\n      \"qty\": 1\n    }\n  ],\n  \"total\": 16000,\n  \"status\": \"NEW\",\n  \"notes\": \"Entregar antes de las 10am\"\n}"
                                                               },
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/orders",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "orders"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ],
                                      "event":  [
                                                    {
                                                        "listen":  "test",
                                                        "script":  {
                                                                       "type":  "text/javascript",
                                                                       "exec":  [
                                                                                    "const j = pm.response.json();",
                                                                                    "const pk = pm.collectionVariables.get(\u0027primaryKey\u0027) || \u0027id\u0027;",
                                                                                    "pm.collectionVariables.set(\u0027orderId\u0027, j[pk] || j.id || \u0027\u0027);",
                                                                                    "pm.test(\u0027HTTP 201\u0027, function(){ pm.response.to.have.status(201); });"
                                                                                ]
                                                                   }
                                                    }
                                                ]
                                  },
                                  {
                                      "name":  "Orders - List",
                                      "request":  {
                                                      "method":  "GET",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     }
                                                                 ],
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/orders",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "orders"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  },
                                  {
                                      "name":  "Orders - Get by ID",
                                      "request":  {
                                                      "method":  "GET",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     }
                                                                 ],
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/orders/{{orderId}}",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "orders",
                                                                               "{{orderId}}"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  },
                                  {
                                      "name":  "Orders - Update",
                                      "request":  {
                                                      "method":  "PUT",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     },
                                                                     {
                                                                         "key":  "Content-Type",
                                                                         "value":  "application/json"
                                                                     }
                                                                 ],
                                                      "body":  {
                                                                   "mode":  "raw",
                                                                   "raw":  "{\n  \"status\": \"PAID\"\n}"
                                                               },
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/orders/{{orderId}}",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "orders",
                                                                               "{{orderId}}"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  },
                                  {
                                      "name":  "Orders - Delete",
                                      "request":  {
                                                      "method":  "DELETE",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     }
                                                                 ],
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/orders/{{orderId}}",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "orders",
                                                                               "{{orderId}}"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  }
                              ]
                 },
                 {
                     "name":  "Products",
                     "item":  [
                                  {
                                      "name":  "Products - Create",
                                      "request":  {
                                                      "method":  "POST",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     },
                                                                     {
                                                                         "key":  "Content-Type",
                                                                         "value":  "application/json"
                                                                     }
                                                                 ],
                                                      "body":  {
                                                                   "mode":  "raw",
                                                                   "raw":  "{\n  \"name\": \"Latte\",\n  \"price\": 12000,\n  \"sku\": \"LATTE\",\n  \"description\": \"Coffee w/ milk\",\n  \"active\": true\n}"
                                                               },
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/products",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "products"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ],
                                      "event":  [
                                                    {
                                                        "listen":  "test",
                                                        "script":  {
                                                                       "type":  "text/javascript",
                                                                       "exec":  [
                                                                                    "const j = pm.response.json();",
                                                                                    "const pk = pm.collectionVariables.get(\u0027primaryKey\u0027) || \u0027id\u0027;",
                                                                                    "pm.collectionVariables.set(\u0027productId\u0027, j[pk] || j.id || \u0027\u0027);",
                                                                                    "pm.test(\u0027HTTP 201\u0027, function(){ pm.response.to.have.status(201); });"
                                                                                ]
                                                                   }
                                                    }
                                                ]
                                  },
                                  {
                                      "name":  "Products - List",
                                      "request":  {
                                                      "method":  "GET",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     }
                                                                 ],
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/products",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "products"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  },
                                  {
                                      "name":  "Products - Get by ID",
                                      "request":  {
                                                      "method":  "GET",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     }
                                                                 ],
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/products/{{productId}}",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "products",
                                                                               "{{productId}}"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  },
                                  {
                                      "name":  "Products - Update",
                                      "request":  {
                                                      "method":  "PUT",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     },
                                                                     {
                                                                         "key":  "Content-Type",
                                                                         "value":  "application/json"
                                                                     }
                                                                 ],
                                                      "body":  {
                                                                   "mode":  "raw",
                                                                   "raw":  "{\n  \"price\": 12500,\n  \"active\": true\n}"
                                                               },
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/products/{{productId}}",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "products",
                                                                               "{{productId}}"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  },
                                  {
                                      "name":  "Products - Delete",
                                      "request":  {
                                                      "method":  "DELETE",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     }
                                                                 ],
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/products/{{productId}}",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "products",
                                                                               "{{productId}}"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  }
                              ]
                 },
                 {
                     "name":  "Customers",
                     "item":  [
                                  {
                                      "name":  "Customers - Create",
                                      "request":  {
                                                      "method":  "POST",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     },
                                                                     {
                                                                         "key":  "Content-Type",
                                                                         "value":  "application/json"
                                                                     }
                                                                 ],
                                                      "body":  {
                                                                   "mode":  "raw",
                                                                   "raw":  "{\n  \"name\": \"Cliente A\",\n  \"email\": \"a@example.com\",\n  \"phone\": \"+57 300 000 0000\",\n  \"address\": \"Calle 1 #2-3\"\n}"
                                                               },
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/customers",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "customers"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ],
                                      "event":  [
                                                    {
                                                        "listen":  "test",
                                                        "script":  {
                                                                       "type":  "text/javascript",
                                                                       "exec":  [
                                                                                    "const j = pm.response.json();",
                                                                                    "const pk = pm.collectionVariables.get(\u0027primaryKey\u0027) || \u0027id\u0027;",
                                                                                    "pm.collectionVariables.set(\u0027customerId\u0027, j[pk] || j.id || \u0027\u0027);",
                                                                                    "pm.test(\u0027HTTP 201\u0027, function(){ pm.response.to.have.status(201); });"
                                                                                ]
                                                                   }
                                                    }
                                                ]
                                  },
                                  {
                                      "name":  "Customers - List",
                                      "request":  {
                                                      "method":  "GET",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     }
                                                                 ],
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/customers",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "customers"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  },
                                  {
                                      "name":  "Customers - Get by ID",
                                      "request":  {
                                                      "method":  "GET",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     }
                                                                 ],
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/customers/{{customerId}}",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "customers",
                                                                               "{{customerId}}"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  },
                                  {
                                      "name":  "Customers - Update",
                                      "request":  {
                                                      "method":  "PUT",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     },
                                                                     {
                                                                         "key":  "Content-Type",
                                                                         "value":  "application/json"
                                                                     }
                                                                 ],
                                                      "body":  {
                                                                   "mode":  "raw",
                                                                   "raw":  "{\n  \"phone\": \"+57 301 123 4567\"\n}"
                                                               },
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/customers/{{customerId}}",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "customers",
                                                                               "{{customerId}}"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  },
                                  {
                                      "name":  "Customers - Delete",
                                      "request":  {
                                                      "method":  "DELETE",
                                                      "header":  [
                                                                     {
                                                                         "key":  "Authorization",
                                                                         "value":  "Bearer {{idToken}}"
                                                                     }
                                                                 ],
                                                      "url":  {
                                                                  "raw":  "{{baseUrl}}/customers/{{customerId}}",
                                                                  "host":  [
                                                                               "{{baseUrl}}"
                                                                           ],
                                                                  "path":  [
                                                                               "customers",
                                                                               "{{customerId}}"
                                                                           ]
                                                              }
                                                  },
                                      "response":  [

                                                   ]
                                  }
                              ]
                 }
             ]
}
